
opp-tools is a collection of tools to track academic papers uploaded
to (or linked from) certain web pages.

version 0.5 (2010-06-12)

---------------------------------------------------------------------
INSTALLATION AND SETUP
---------------------------------------------------------------------

To process documents in various formats, a few additional software
packages are required:

pdftohtml (Poppler version)
pdftk
cuneiform 0.9
convert (ImageMagick)
ps2pdf
unoconv
wkhtmltopdf

On Ubuntu 10.04, the following installs everything except cuneiform:

sudo apt-get install poppler-utils pdftk imagemagick ghostscript \
unoconv wkhtmltopdf

The cuneiform version in the standard repositories is too old. For
Debian-based systems, you can get cuneiform 0.9 from
http://notesalexp.org/. Otherwise see
https://launchpad.net/cuneiform-linux/.

Finally, make sure you have the following CPAN Perl modules:

HTML::LinkExtractor
HTML::Encoding
HTML::Strip
HTML::TreeBuilder
XML::Writer
XML::XPath
CML::RSS
Text::Capitalize
String::Approx
Algorithm::NaiveBayes
AI::Categorizer

Now set up a MySQL database to store the tracked pages and papers. To
create the tables, call

mysql -u dbuser -p dbname < setup.sql 

Then copy config-example.pl to config.pl and adjust the values for the
database connection and the installation path.

At this point there aren't any pages in the database yet. To test the
setup, you might try

INSERT INTO sources (url) VALUES 
  ('http://github.com/wo/opp-tools/wiki/Test-source-page');

Then run 

process_pages -v1
process_links -v1

The first of these looks for (new) links on the tracked pages, the
second extracts information from (new) papers found behind these
links.


---------------------------------------------------------------------
INTERNALS
---------------------------------------------------------------------

Here is a flowchart of the steps in process_links.pl. Boxed terms
stand for applications that are part of opp-tools, underlined ones
denote other applications that may also be installed. Capitalised
steps without boxes are performed directly in process_link.pl.


                              url

                               |
                               V
                                      server error?   
                             FETCH    unsupported filetype?
                               &      intermediate page?
                            CONFIRM  --------------------->  STORE
                                     
                               |
                               |
                               V
                            
                             SPAM      spam?
                             CHECK   -------->  STORE
               
                               |
                _______________|________________
               |         |           |          |
               | ps?     | pdf?      | doc?     | html?
               |         |           | rtf?     | txt?
               V         V           V          V
                      +------+              +-------+
            ps2pdf -> | RPDF | <- antiword  | RHTML | 
            ------    +------+    --------  +-------+
                         |                      |
                         |_____ ________________|
                               |
                               V
                          +---------+   
                          |  TIDY   |  
                          +---------+   
                               |
                               V

                            ENRICH    

                               |
                               V
                          +---------+   
                          |  META   |  
                          +---------+   
                               |
                               V
                          
                             SPAM      spam?
                             CHECK   -------->  STORE
                          
                               |
                               V
 
                             STORE


---------------------------------------------------------------------
SMALL PRINT 
---------------------------------------------------------------------

The development of this software will be partly supported by the
University of London and the UK Joint Information Systems Committee as
part of the PhilPapers 2.0 project (Information Environment
programme).

Copyright (c) 2003-2010 Wolfgang Schwarz, wo@umsu.de

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or (at
your option) any later version. See
http://www.gnu.org/licenses/gpl.html.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
General Public License for more details.

