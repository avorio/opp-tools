
opp-tools is a collection of tools to track academic papers uploaded
to (or linked from) certain web pages.

version 0.9 (2010-10-02)

---------------------------------------------------------------------
INSTALLATION AND SETUP
---------------------------------------------------------------------

To process documents in various formats, some additional software
packages are required. (You may omit packages for formats you don't
need.)

pdftohtml, the Poppler version
pdftk
cuneiform 0.9                    (for OCR processing)
convert, from ImageMagick        (for OCR processing)
ps2pdf                           (for Postscript files)
openoffice.org                   (for Word/RTF files)
unoconv                          (for Word/RTF files)
wkhtmltopdf                      (for HTML files)

On Ubuntu 10.04, the following installs everything except cuneiform
and wkhtmltopdf:

aptitude install poppler-utils pdftk imagemagick ghostscript \
openoffice.org unoconv

The cuneiform version in the standard repositories too old. For
Debian-based systems, you can get cuneiform 0.9 from
http://notesalexp.org/. Otherwise see
https://launchpad.net/cuneiform-linux/.

For wkhtmltopdf, I would recommend a recent static binary from
http://code.google.com/p/wkhtmltopdf/, which you can install by
calling something like

wget http://wkhtmltopdf.googlecode.com/files/wkhtmltopdf-0.9.9-static-i386.tar.bz2
tar xvjf wkhtmltopdf-0.9.9-static-i386.tar.bz2
sudo mv wkhtmltopdf-i386 /usr/bin/wkhtmltopdf

Finally, make sure you have the following CPAN Perl modules.

perl -MCPAN -e 'install HTML::LinkExtractor'
perl -MCPAN -e 'install HTML::Encoding'
perl -MCPAN -e 'install HTML::Strip'
perl -MCPAN -e 'install HTML::TreeBuilder'
perl -MCPAN -e 'install XML::Writer'
perl -MCPAN -e 'install XML::XPath'
perl -MCPAN -e 'install XML::RSS'
perl -MCPAN -e 'install Text::Capitalize'
perl -MCPAN -e 'install String::Approx'
perl -MCPAN -e 'install Algorithm::NaiveBayes'
perl -MCPAN -e 'install AI::Categorizer'

Now set up a MySQL database to store the tracked pages and papers. To
create the tables, call

mysql -u dbuser -p dbname < setup.sql 

Then copy config-example.pl to config.pl and adjust the values for the
database connection and the installation path.

At this point there aren't any pages in the database yet. To test the
setup, you might run

./update_sources add "http://consc.net/papers.html"

and then

./process_pages -v1
./process_links -v1

The first of these looks for (new) links on the tracked pages, the
second extracts information from (new) papers found behind these
links.


---------------------------------------------------------------------
INTERNALS
---------------------------------------------------------------------

Here is a flowchart of the steps in process_links.pl. Boxed terms
stand for applications that are part of opp-tools, underlined ones
denote other applications that may also be installed. Capitalised
steps without boxes are performed directly in process_link.pl.


                              url

                               |
                               V
                                      server error?   
                             FETCH    unsupported filetype?
                               &      intermediate page?
                            CONFIRM  --------------------->  STORE
                                     
                               |
                               |
                               V
                            
                             SPAM      spam?
                             CHECK   -------->  STORE
               
                               |
                _______________|________________
               |         |           |          |
               | ps?     | pdf?      | doc?     | html?
               |         |           | rtf?     | txt?
               V         V           V          V
                      +------+              +-------+
            ps2pdf -> | RPDF | <- antiword  | RHTML | 
            ------    +------+    --------  +-------+
                         |                      |
                         |_____ ________________|
                               |
                               V
                          +---------+   
                          |  TIDY   |  
                          +---------+   
                               |
                               V

                            ENRICH    

                               |
                               V
                          +---------+   
                          |  META   |  
                          +---------+   
                               |
                               V
                          
                             SPAM      spam?
                             CHECK   -------->  STORE
                          
                               |
                               V
 
                             STORE


---------------------------------------------------------------------
SMALL PRINT 
---------------------------------------------------------------------

The development of this software will be partly supported by the
University of London and the UK Joint Information Systems Committee as
part of the PhilPapers 2.0 project (Information Environment
programme).

Copyright (c) 2003-2010 Wolfgang Schwarz, wo@umsu.de

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or (at
your option) any later version. See
http://www.gnu.org/licenses/gpl.html.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
General Public License for more details.

