YUI.add("rg.views.publicprofile.ProfileSignupBannerView",function(a){var b="signupBannerHidden";a.namespace("rg.views.publicprofile"),a.rg.views.publicprofile.ProfileSignupBannerView=a.Base.create("publicprofile.ProfileSignupBannerView",a.rg.WidgetView,[],{events:{".js-collapse":{click:"collapse"}},afterRendered:function(){lscache.get(b)&&this.collapse();var c=this.get("container"),d=a.one("#footer");d&&d.setStyle("marginBottom","130px"),a.Lang.later(4e3,this,function(){c.hasClass("expanded")||c.hasClass("collapsed")||c.addClass("expanded")})},collapse:function(){lscache.set(b,!0);var c=this.get("container");c.removeClass("expanded"),c.removeClass("hover-capable"),c.addClass("collapsed"),a.Lang.later(1250,this,function(){c.addClass("hover-capable")})}})},"0.0.1",{requires:[]});
YUI.add("rg-object",function(a){a.namespace("rg.object"),a.rg.object.deepMerge=function(){var b=Array.prototype.slice.call(arguments),c=b.shift(),d=b.length;if(0===d)return c;for(var e=0;d>e;e++)c=a.mix(c,b[e],!0,null,0,!0);return c},a.rg.object.map=function(b,c,d,e){var f={};for(var g in b)(b.hasOwnProperty(g)||e)&&(f[g]=c.call(d||a,b[g],g,b));return f}},"0.0.1",{requires:[]});
"use strict";YUI.add("rg-form-serialize",function(a){a.namespace("rg.form");var b=function(a){return a.getDOMNode&&(a=a.getDOMNode()),a.getAttribute("method").toUpperCase()},c=function(a){return a.getDOMNode&&(a=a.getDOMNode()),a.getAttribute("action")},d=function(b,c,d,e){b.getDOMNode&&(b=b.getDOMNode());var g=f(b,!1);d&&(g=a.merge(g,d)),a.rg.ajaxDbwAware(b.getAttribute("action"),g,c,e,null,b.getAttribute("method"))};a.rg.form.BindAjax=function(b,c,d,e){var f=g(b,!1);e&&(f=a.merge(f,e)),a.rg.ajaxDbwAware(b.getAttribute("action"),f,c,d,null,b.getAttribute("method").toUpperCase())};var e=function(b,c){var d,e=b.useDisabled||!1,g=b.generateID?b.generateID():"string"==typeof b.id?b.id:b.id.getAttribute("id");return g||(g=a.guid("io:"),b.id.setAttribute("id",g)),d=f(a.config.doc.getElementById(g),e),c?a.merge(c,d):d},f=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o={};for(d=0,e=b.elements.length;e>d;++d)if(f=b.elements[d],g=f.disabled,h=f.name,c?h:h&&!g)switch(i=f.value,f.type){case"select-one":f.selectedIndex>-1&&(j=f.options[f.selectedIndex],o[h]=j.attributes.value&&j.attributes.value.specified?j.value:j.text);break;case"select-multiple":if(f.selectedIndex>-1)for(k=0,l=f.selectedIndex,m=f.options.length;m>l;++l)j=f.options[l],j.selected&&(o[h+"["+k+"]"]=j.attributes.value&&j.attributes.value.specified?j.value:j.text,k++);break;case"radio":case"checkbox":f.checked&&(h.indexOf&&-1!==h.indexOf("[]",h.length-2)?(h=h.substring(0,h.length-2),o[h]||(o[h]=[]),o[h].push(i)):o[h]=i);break;case"file":case void 0:case"reset":case"button":break;default:if(n=h.lastIndexOf("[]"),n>=0){for(l=0;!a.Lang.isUndefined(o[h.replace(/\[\]/,"["+l+"]")]);l++);o[h.replace(/\[\]/,"["+l+"]")]=i}else o[h]=i}return o},g=function(b,c){var d={},e={validate:/^[a-zA-Z_][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9%_-]+)\])*$/,key:/[a-zA-Z0-9%_-]+|(?=\[\])/g,push:/^$/,named:/^[a-zA-Z0-9%_-]+$/},f=function(b,c){for(var d,f=b.match(e.key),j=c,k=b;void 0!==(d=f.pop());)k=k.replace(new RegExp("\\["+d+"\\]$"),""),d.match(e.push)?j=g([],h(k),j):d.match(e.named)&&(j=g({},d,j));a.rg.object.deepMerge(i,j)};c=void 0===c?!0:c;var g=function(a,b,c){return a[b]=c,a},h=function(a,b){return void 0===d[a]&&(d[a]=0),void 0===b?d[a]++:void 0!==b&&b>d[a]?(d[a]=++b,d[a]):void 0},i={},j=b.all(["input","select","radio","checkbox","textarea"].join(","));j.each(function(a){var b=a.get("name"),d=a.get("value");if(e.validate.test(b)&&a.get("disabled")!==!0){if("checkbox"===a.get("type"))if(c)d=a.get("checked")?!0:!1;else if(!a.get("checked"))return;if("radio"!==a.get("type")||a.get("checked"))if("select-multiple"===a.get("type")){var g=[];a.get("options").each(function(a){a.get("selected")&&g.push(a.get("value"))});var h=b.indexOf("[]",b.length-2);f(b.substring(0,-1==h?b.length:h),g)}else f(b,d)}});var k=function l(b){return a.Object.each(b,function(b,c,d){if(a.Lang.isObject(b)){var e=-1,f=0;a.Object.each(b,function(a,b){var c=parseInt(b);c>=0&&c==b&&c-1==e&&(e=c,f++)}),l(b),f==a.Object.size(b)&&(d[c]=a.Object.values(b))}}),b};return k(i)},h=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c};a.rg.form.ExtractFieldsFromSerialize=h,a.rg.form.FormSerialize=e,a.rg.form.DeprecatedBindAjax=d,a.rg.form.getFormMethod=b,a.rg.form.getFormAction=c,a.rg.form.getDataFromForm=f,a.rg.form.DeepFormFieldSerialize=g},"0.0.1",{requires:["rg-object","node"]});
"use strict";YUI.add("rg-form-validation",function(a){a.namespace("rg.form"),a.namespace("rg.form.validation"),a.rg.form.bindValidation=function(b,c,d){return new a.rg.form.FormValidation({form:b,config:c,ctx:d})},a.rg.form.createValidator=function(b,c){return a.Lang.isUndefined(a.rg.form[b+"Validator"])?void a.log("Validator "+b+" not found.","warn"):new a.rg.form[b+"Validator"](c)},a.rg.form.FormValidation=a.Base.create("FormValidation",a.Base,[],{initializer:function(b){var c=this.get("form");this._handles=[],c&&(this._handles.push(c.on("submit",this.validate,this)),b.config.evaluateOnChange&&(this._handles.push(c.on("change",this._evaluate,this)),8===a.UA.ie&&this._handles.push(c.delegate("blur",function(a){this._evaluate({currentTarget:c,target:a.currentTarget})},"input.text",this))))},destructor:function(){a.Array.each(this._handles,function(a){a.detach()})},_evaluate:function(b){var c=b.currentTarget,d=b.target.get("tagName"),e=this.get("config"),f=e.fields,g={success:!0,result:{},errors:{}},h=a.rg.form.DeepFormFieldSerialize(c);if("FORM"===d)a.Object.each(f,function(b,c){var d=h[c];this.get("config").trimValues===!0&&(d=a.Lang.trim(d)),a.Object.each(b,function(b,e){if(a.Lang.isUndefined(a.rg.form[e+"Validator"]))return void a.log("Validator "+e+" not found.","warn");var f=new a.rg.form[e+"Validator"](b),h=f.isValid(d);a.Lang.isNull(h)||(g.success=!1,a.Lang.isUndefined(g.errors[c])&&(g.errors[c]=[]),g.errors[c].push(h))})},this),this.fire("evaluate",{response:g});else{var i=b.target.get("name"),j=f[i],k=h[i];this.get("config").trimValues===!0&&(k=a.Lang.trim(k)),a.Object.each(j,function(b,c){if(a.Lang.isUndefined(a.rg.form[c+"Validator"]))return void a.log("Validator "+c+" not found.","warn");var d=new a.rg.form[c+"Validator"](b),e=d.isValid(k);a.Lang.isNull(e)||(g.success=!1,a.Lang.isUndefined(g.errors[i])&&(g.errors[i]=[]),g.errors[i].push(e))}),this.fire("evaluateField",{field:b.target,response:g})}return g},validate:function(b){var c=this.get("config"),d=this._evaluate(b);return b.preventDefault&&!a.Object.isEmpty(d.errors)&&b.preventDefault(),c.callback&&c.callback.call(this.get("ctx"),b,d),d},evaluate:function(a){var b=this.get("form"),c=a||b;return this._evaluate({currentTarget:b,target:c})}},{ATTRS:{form:{},config:{},ctx:{}}});var b=function(b,c){var d=b.get(c),e=b.getAttrs();return a.mustache(d,e)};a.rg.form.FormValidator=a.Base.create("FormValidator",a.Base,[],{},{ATTRS:{message:{value:"Field is invalid"}}}),a.rg.form.NotBlankValidator=a.Base.create("NotBlankValidator",a.rg.form.FormValidator,[],{isValid:function(c){return a.Lang.isUndefined(c)||a.Lang.isNull(c)||!c?b(this,"message"):null}},{ATTRS:{message:{value:"This field's value must not be empty"}}}),a.rg.form.RegexValidator=a.Base.create("RegexValidator",a.rg.form.FormValidator,[],{isValid:function(a){var c=this.get("pattern").test(a);return this.get("match")||(c=!c),c?null:b(this,"message")}},{ATTRS:{pattern:{},match:{value:!0},message:{value:"Field is invalid"}}}),a.rg.form.LengthValidator=a.Base.create("LengthValidator",a.rg.form.FormValidator,[],{isValid:function(a){return this.get("max")&&a.length>this.get("max")?(this.set("limit",this.get("max")),b(this,"maxMessage")):this.get("min")&&a.length<this.get("min")?(this.set("limit",this.get("min")),b(this,"minMessage")):null}},{ATTRS:{limit:{},min:{},maxMessage:{value:"This field's value must not have more than {{limit}} characters"},max:{},minMessage:{value:"This field's value must not have less than {{limit}} characters"}}}),a.rg.form.SelectValidator=a.Base.create("SelectValidator",a.rg.form.FormValidator,[],{isValid:function(a){return this.get("max")&&a.length>this.get("max")?(this.set("limit",this.get("max")),b(this,"maxMessage")):this.get("min")&&a.length<this.get("min")?(this.set("limit",this.get("min")),b(this,"minMessage")):null}},{ATTRS:{limit:{},min:{},maxMessage:{value:"This field's value must not have more than {{limit}} values"},max:{},minMessage:{value:"This field's value must not have less than {{limit}} values"}}}),a.rg.form.LengthValidator=a.Base.create("LengthValidator",a.rg.form.FormValidator,[],{isValid:function(a){return this.get("max")&&a.length>this.get("max")?(this.set("limit",this.get("max")),b(this,"maxMessage")):this.get("min")&&a.length<this.get("min")?(this.set("limit",this.get("min")),b(this,"minMessage")):null}},{ATTRS:{limit:{},min:{},maxMessage:{value:"This field's value must not have more than {{limit}} characters"},max:{},minMessage:{value:"This field's value must not have less than {{limit}} characters"}}}),a.rg.form.UrlValidator=a.Base.create("UrlValidator",a.rg.form.FormValidator,[],{isValid:function(a){if(!a)return null;var b="^(replaceProtocol?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$";b=b.replace(/replaceProtocol/,this.get("protocols").join("|"));var c=new RegExp(b,"i");return c.exec(a)?null:this.get("message")}},{ATTRS:{message:{value:"This value is not a valid URL."},protocols:{value:["http","https"]}}});var c=a.rg.validation.isValidMail;a.rg.form.EmailValidator=a.Base.create("EmailValidator",a.rg.form.FormValidator,[],{isValid:function(a){return c(a)?null:b(this,"message")}},{ATTRS:{message:{value:"This field's value has not the correct email format"}}}),a.rg.form.RepeatValidator=a.Base.create("RepeatValidator",a.rg.form.FormValidator,[],{isValid:function(a){var c=this.get("node").get("value");return a!==c?b(this,"message"):null}},{ATTRS:{node:{},message:{value:"Please repeat the value"}}}),a.rg.form.PasswordValidator=a.Base.create("PasswordValidator",a.rg.form.FormValidator,[],{isValid:function(a){return this.isPasswordValid(a)?null:b(this,"message")},isPasswordValid:function(a){this._checkLength(a),this._checkCharacters(a),this._evaluate();var b=this._getSecurityLevelNumericValue(this.get("securityState")),c=this._getSecurityLevelNumericValue(this.get("securityLevel"));return b>=c},_checkLength:function(b){var c=b.length;c>=8?this.set("securityState",a.rg.form.PasswordValidator.SECURITY_LEVEL_HIGH):c>=6?this.set("securityState",a.rg.form.PasswordValidator.SECURITY_LEVEL_MIDDLE):0>=c?this.set("securityState",a.rg.form.PasswordValidator.SECURITY_LEVEL_NONE):this.set("securityState",a.rg.form.PasswordValidator.SECURITY_LEVEL_LOW)},_checkCharacters:function(b){var c,d=0;c=/[A-Za-z]/,a.Lang.isNull(c.exec(b))&&(this.get("securityState")==a.rg.form.PasswordValidator.SECURITY_LEVEL_MIDDLE||this.get("securityState")==a.rg.form.PasswordValidator.SECURITY_LEVEL_HIGH)&&this.set("securityState",a.rg.form.PasswordValidator.SECURITY_LEVEL_LINK),this.get("securityState")==a.rg.form.PasswordValidator.SECURITY_LEVEL_HIGH&&(c=/[A-Z].*[a-z]|[a-z].*[A-Z]/,a.Lang.isNull(c.exec(b))||d++,c=/[0-9]/,a.Lang.isNull(c.exec(b))||d++,c=/[^A-Za-z0-9_]/,a.Lang.isNull(c.exec(b))||d++,2>d&&this.set("securityState",a.rg.form.PasswordValidator.SECURITY_LEVEL_MIDDLE))},_evaluate:function(){switch(this.set("message",a.rg.form.PasswordValidator.INFO_FIELD_TEXT_LOW),this.get("securityState")){case a.rg.form.PasswordValidator.SECURITY_LEVEL_NONE:case a.rg.form.PasswordValidator.SECURITY_LEVEL_LOW:this.set("message",a.rg.form.PasswordValidator.INFO_FIELD_TEXT_LOW);break;case a.rg.form.PasswordValidator.SECURITY_LEVEL_MIDDLE:this.set("message",a.rg.form.PasswordValidator.INFO_FIELD_TEXT_MIDDLE);break;case a.rg.form.PasswordValidator.SECURITY_LEVEL_LINK:this.set("message",a.rg.form.PasswordValidator.INFO_FIELD_TEXT_LINK),this.set("securityState",a.rg.form.PasswordValidator.SECURITY_LEVEL_LOW);break;case a.rg.form.PasswordValidator.SECURITY_LEVEL_HIGH:this.set("message",a.rg.form.PasswordValidator.INFO_FIELD_TEXT_HIGH)}},_getSecurityLevelNumericValue:function(b){switch(b){case a.rg.form.PasswordValidator.SECURITY_LEVEL_LOW:return 1;case a.rg.form.PasswordValidator.SECURITY_LEVEL_LINK:return 2;case a.rg.form.PasswordValidator.SECURITY_LEVEL_MIDDLE:return 3;case a.rg.form.PasswordValidator.SECURITY_LEVEL_HIGH:return 4;case a.rg.form.PasswordValidator.SECURITY_LEVEL_NONE:return 0;default:return 0}}},{SECURITY_LEVEL_NONE:"none",SECURITY_LEVEL_LOW:"low",SECURITY_LEVEL_MIDDLE:"medium",SECURITY_LEVEL_HIGH:"high",SECURITY_LEVEL_LINK:"link",INFO_FIELD_TEXT_LOW:"Your password should contain at least six characters.",INFO_FIELD_TEXT_LINK:'Password must contain letters (A-Z). <a href="javascript:" class="action-show-password-popup" onclick="return false;">Learn more</a>',INFO_FIELD_TEXT_MIDDLE:'Password could be more secure. <a href="javascript:" class="action-show-password-popup" onclick="return false;">Learn more</a>',INFO_FIELD_TEXT_HIGH:"Strong password",ATTRS:{securityState:{},securityLevel:{value:"medium"},message:{value:"Password is not valid"}}}),a.rg.form.REGEX_NAME=/^[^@0-9!\\`´"§$°^?#*%&/~_{}()\[\]+=|<>;€£¥]*$/},"1.0.0",{requires:["rg-form-serialize","gallery-mustache","rg-validation","rg-form-serialize"]});
YUI.add("rg-keyboard",function(a){a.namespace("rg.keyboard"),a.rg.keyboard=function(b){var c={A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},d={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57},e={F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},f={LEFT:37,UP:38,RIGHT:39,DOWN:40},g={SPACE:32,ENTER:13,TAB:9,ESCAPE:27,BACKSPACE:8,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,NUM_LOCK:144,INSERT:45,DEL:46,HOME:36,END:35,PAGE_UP:33,PAGE_DOWN:34},h=function(b,c){return a.Array.indexOf(a.Object.values(b),c)>=0};return b.isAlphabetic=function(a){return h(c,a)},b.isNumeric=function(a){return h(d,a)},b.isAlphaNumeric=function(a){return b.isNumeric(a)||b.isAlphabetic(a)},b.isFunctionKey=function(a){return h(e,a)},b.isArrowKey=function(a){return h(f,a)},b.isNoInputModifier=function(){var b=a.merge({},e,f,g.TAB,g.ESCAPE,g.SHIFT,g.CONTROL,g.ALT,g.CAPS_LOCK,g.NUM_LOCK,g.HOME,g.END,g.PAGE_UP,g.PAGE_DOWN);return function(a){return h(b,a)}}(),b.keys=a.merge({},c,d,e,f,g),b}(a.rg.keyboard||{})},"0.0.1",{requires:[]});
"use strict";YUI.add("rg-form",function(a){a.namespace("rg.form");var b,c,d,e,f='<span class="textarea-count"></span>',g=a.Base.create("SelectAllPlugin",a.Plugin.Base,[],{initializer:function(){this._selectAllDelegate=this.get("host").delegate("change",this._applyStateToCheckboxes,this.get("triggerSelector"),this),this._checkboxDelegate=this.get("host").delegate("change",this._updateSelectAll,this.get("checkboxSelector"),this)},destructor:function(){this._selectAllDelegate.detach(),this._checkboxDelegate.detach()},_applyStateToCheckboxes:function(a){var b=a.currentTarget.get("checked");this.get("host").all(this.get("checkboxSelector")).set("checked",b),this.fire("selectAll:changed",{checked:b})},_updateSelectAll:function(){var a=this.get("host").all(this.get("checkboxSelector")),b=a.size(),c=0;return a.each(function(a){a.get("checked")&&c++}),c==b?void this.get("host").all(this.get("triggerSelector")).set("checked",!0):(this.get("host").all(this.get("triggerSelector")).set("checked",!1),void this.fire("selectAll:changed",{checked:c>0}))},refresh:function(){this._updateSelectAll()}},{NS:"selectAll",ATTRS:{triggerSelector:{value:"input[name=selectAll]"},checkboxSelector:{value:"input.checkbox"}}}),h=a.Base.create("SelectAllPluginDeprecated",a.Plugin.Base,[],{_delegate:null,initializer:function(){this._selectAllDelegate=a.delegate("click",this.applyStateToCheckboxes,this.get("host"),this.get("triggerSelector"),this),this._checkboxDelegate=a.delegate("click",this.updateSelectAll,this.get("host"),this.get("checkboxSelector"),this)},destructor:function(){this._selectAllDelegate.detach(),this._checkboxDelegate.detach()},applyStateToCheckboxes:function(a){var b=a.target.get("checked");a.container.all(this.get("checkboxSelector")).set("checked",b),this.fire("selectAll:changed",{checked:b})},updateSelectAll:function(a){var b=a.container.all(this.get("checkboxSelector")),c=b.size(),d=0;return b.each(function(a){a.get("checked")&&d++}),d==c?void a.container.all(this.get("triggerSelector")).set("checked",!0):(a.container.all(this.get("triggerSelector")).set("checked",!1),void this.fire("selectAll:changed",{checked:d>0}))}},{NS:"selectAll",ATTRS:{triggerSelector:{value:"input[name=selectAll]"},checkboxSelector:{value:"input[type=checkbox]"}}});b=a.Base.create("DelayedObserver",a.Base,[],{initializer:function(){this._keyupHandle=this.get("node").on("keyup",this._handleKeyStroke,this),this._onAutoCompleteHandle=this.get("node").on("select",this._handleKeyStroke,this),this._delayId=-1},destructor:function(){clearTimeout(this._delayId),this._keyupHandle.detach(),this._onAutoCompleteHandle.detach()},_handleKeyStroke:function(a){if(this.get("isValidInputFn").call(this,a)){-1!=this._delayId&&clearTimeout(this._delayId);var b=this,c=this.get("fn"),d=this.get("ctx");this._delayId=setTimeout(function(){null===d?c(a,b.get("args")):c.call(d,a,b.get("args"))},1e3*b.get("delay"))}}},{ATTRS:{node:{setter:function(b){return a.one(b)}},delay:{value:.2,validator:function(b){return a.Lang.isNumber(b)}},ctx:{value:null,validator:function(b){return a.Lang.isObject(b)}},fn:{validator:function(b){return a.Lang.isFunction(b)}},isValidInputFn:{value:function(b){return!a.rg.keyboard.isNoInputModifier(b.keyCode)}},args:{value:null}}}),c=a.Base.create("DelayedObserverPlugin",a.Plugin.Base,[],{initializer:function(c){var d=a.merge(c,{node:this.get("host")});this._observer=new b(d)},destructor:function(){this._observer.destroy()}},{NS:"delayedObserver"});var i,j=a.Base.create("TextareaLimiterPlugin",a.Plugin.Base,[],{initializer:function(){var b=this.get("host"),c=this.get("counterSelector");if(this.submit=a.one(this.get("submitSelector")),!a.Array.find(["textarea","text"],function(a){return b.get("type")==a}))return void a.log("TextareaLimiter failed, the host element is not a textarea.","warn");if(!a.one(this.get("submitSelector")))return void a.log("TextareaLimiter failed, the given selector for the submit button is not valid.","warn");if(c){if(!a.one(c))return void a.log("TextareaLimiter failed, the given selector for the counter is not valid.","warn");this._set("counter",a.one(c))}else b.insert(this.get("counter"),"after");this._createEvents(),this._checkCharLimit(),"hide"==this.get("initialVisibility")&&this.hide(),"disabled"==b.get("disabled")&&this.hide()},destructor:function(){var a=this.get("counter"),b=this.get("counterSelector");a.purge(!0),b||a.remove(!0),this._removeEvents()},_createEvents:function(){var a=this.get("host");this._handles=[],this._handles.push(a.on("keyup",this._checkCharLimit,this)),this._handles.push(a.on("pasted",this._checkCharLimit,this))},_removeEvents:function(){for(var b=0;b<this._handles.length;b++){var c=this._handles[b];a.Lang.isUndefined(c)||a.Lang.isNull(c)||c.detach()}},_checkCharLimit:function(){var b,c=this.submit.getAttribute("disabled"),d="disabled"===c,e=this.get("lengthCounterFn").call(null,this.get("host").get("value")),f=this.get("minCharLimit");a.Lang.isNumber(c)&&a.UA.ie<=7&&(d=0!==c),b=this.get("countTowardsMinCharLimit")?-f+e:this.get("maxCharLimit")-e,this._redrawCounter(b),(0>b||f>e)&&!d&&this.fire("overLimit"),b>=0&&e>=f&&d&&this.fire("withinLimit")},_redrawCounter:function(a){var b=this.get("counter");b.setContent(a),0>a&&!this.get("countTowardsMinCharLimit")?b.addClass("textarea-count-negative"):b.removeClass("textarea-count-negative")},show:function(){"disabled"!=this.get("host").get("disabled")&&this.get("counter").removeClass("hidden")},hide:function(){this.get("counter").addClass("hidden")},reset:function(){this._checkCharLimit(),this.show()}},{NS:"textareaLimiter",ATTRS:{counter:{writeOnce:!0,valueFn:function(){var b=a.Node.create(f);return b.setStyles({position:"relative","z-index":1,height:"0px",overflow:"visible"}),b}},counterSelector:{value:null},initialVisibility:{value:"show"},submitSelector:{value:null},maxCharLimit:{value:150},minCharLimit:{value:1},countTowardsMinCharLimit:{value:!1},lengthCounterFn:{value:function(a){return a.length}}}});i=function(b){var c=a.one(b);if(!a.Lang.isNull(c)){var d=c.get("elements"),e=!1;d.each(function(b){if(!e){var c=b.get("type");if("fieldset"!=c){var d=b.getStyle("visibility"),f=b.getAttribute("disabled"),g=b.getStyle("display"),h=b.get("parentNode"),i=h.getStyle("display"),j=b.ancestor(".c-input-wrapper"),k=b.get("value"),l=a.Lang.isNull(k),m=b.get("tagName"),n=null;j&&(n=j.getStyle("display")),"FIELDSET"===m||"hidden"===c||"hidden"===d||f===!0||"none"===g||"none"===i||"none"===n||k&&!l||(b.focus(),e=!0)}}})}},e=function(){var b=a.one("div.st-st");if(!a.Lang.isNull(b)){var c=b.get("parentNode"),d=a.Node.create("<input />"),e=d.generateID(),f=a.one("#"+document.getElementById(b.get("title")).id),g=function(){a.Lang.isNull(c.one("#"+e))||(d.remove(!0),d=a.Node.create("<input />"),e=d.generateID());for(var b=c.get("children").item(0),g=f.get("value"),h=g.length%3,i=g.charCodeAt(h),j=b.get("value"),k=""+i,l=0;l<j.length;l++)l%(h+3)===0&&(k+=j.charAt(l));d.set("type","hidden"),d.set("name",a.one("span.st-st").get("title")),d.set("value",k),c.append(d)};f.get("value")&&g()}},d=a.Base.create("FormInputHighlighterPlugin",a.Plugin.Base,[],{initializer:function(){var a=this.get("host");this._focus=a.delegate("focus",this._handleFocus,this.get("selector"),this),this._blur=a.delegate("blur",this._handleBlur,this.get("selector"),this)},_getContainer:function(a){return a.ancestor(this.get("cssAncestorEl"))},_handleFocus:function(a){var b=this._getContainer(a.currentTarget);b.addClass(this.get("cssActiveClass"))},_handleBlur:function(a){var b=this._getContainer(a.currentTarget);b.removeClass(this.get("cssActiveClass"))}},{NS:"formInputHighlighterPlugin",ATTRS:{cssAncestorEl:{},cssActiveClass:{},selector:{}}}),a.rg.form.DelayedObserver=b,a.rg.form.SelectAllPlugin=g,a.rg.form.SelectAllPluginDeprecated=h,a.rg.form.TextareaLimiterPlugin=j,a.rg.form.DelayedObserverPlugin=c,a.rg.form.focusForm=i,a.rg.st=e,a.rg.form.FormInputHighlighterPlugin=d},"0.0.1",{requires:["rg-string","rg-keyboard","event-key","gallery-event-pasted"]});
YUI.add("rg.core.form.GhostPlugin",function(a){a.namespace("rg.core.form"),a.rg.core.form.GhostPlugin=a.Base.create("GhostPlugin",a.Plugin.Base,[],{initializer:function(){var b="placeholder"in document.createElement("input");if(this.set("placeholderSupport",b),this.get("placeholderSupport"))return this.after("labelChange",function(){this.get("host").setAttribute("placeholder",this.get("label"))},this),void(this.get("label").length>0&&this.get("host").setAttribute("placeholder",this.get("label")));this.timerObject=null;var c=this.get("host"),d=this.get("ghostContainer"),e=this.get("ghostLabel"),f=this.get("additionalGhostContainerClass");0===this.get("label").length&&this.set("label",c.getAttribute("placeholder")),c.get("id")||c.generateID(),a.Lang.isNull(f)||d.addClass(f),0!==this.get("labelColor").length&&e.setStyle("color",this.get("labelColor")),e.set("for",c.get("id")),e.addClass(this.get("ghostLabelClass")),e.setContent(this.get("label")),this.after("labelChange",function(){e.setContent(this.get("label"))}),c.insert(d,"before");var g=c.getStyle("float");g&&d.setStyle("float",g),this._realign(),this._createEvents(),"disabled"==this.get("host").get("disabled")&&this.hide(),this.get("host").get("value")&&this.hide(),a.Lang.later(250,this,function(){this.get("host").get("value")&&this.hide()}),this.get("timerClear")>0&&(this.timerObject=a.later(this.get("timerClear"),this,this._timerClear,null,!0))},destructor:function(){if(!this.get("placeholderSupport")){var a=this.get("ghostContainer");a.remove(!0),this.timerObject&&this.timerObject.cancel()}},_timerClear:function(){this.get("host").get("value")&&this.hide()},_createEvents:function(){var a=this.get("host"),b=this.get("ghostLabel");b.on("click",this._labelClick,this),a.on("focus",this.hide,this),a.on("blur",this.show,this)},_removeEvents:function(){var a=this.get("host"),b=this.get("ghostLabel");b.detach("click",this._labelClick),a.detach("focus",this.hide),a.detach("blur",this.show)},_labelClick:function(){this.get("host").focus()},_realign:function(){var a=this.get("host"),b=this.get("ghostLabel"),c=a.get("region").width,d=parseInt(a.getStyle("marginLeft"),10),e=parseInt(a.getStyle("marginTop"),10),f=parseInt(a.getStyle("borderTopWidth"),10),g=parseInt(a.getStyle("paddingTop"),10),h=parseInt(a.getStyle("paddingLeft"),10),i=this.get("offsetLeft"),j=this.get("offsetTop"),k=a.get("offsetHeight"),l=a.getStyle("lineHeight"),m=d+f+h+i,n=e+f+g+j,o=c-m,p=parseInt(l,10);b.setStyles({top:n,left:m,width:o,height:k,lineHeight:p})},show:function(){this.get("placeholderSupport")||"disabled"!==this.get("host").get("disabled")&&(this.get("host").get("value")||this.get("ghostLabel").setStyle("display","inline-block"))},hide:function(){this.get("placeholderSupport")||this.get("ghostLabel").setStyle("display","none")},reset:function(){this.get("placeholderSupport")||(this._removeEvents(),this._createEvents(),this._realign(),this.show())}},{NS:"ghost",ATTRS:{label:{value:""},labelColor:{value:""},ghostContainer:{writeOnce:!0,valueFn:function(){return a.Node.create('<span class="c-ghosttext-overlay"><label class="c-ghosttext-overlay"></label></span>')}},additionalGhostContainerClass:{value:null},ghostLabel:{writeOnce:!0,valueFn:function(){return this.get("ghostContainer").one("label")}},ghostLabelClass:{value:"ghost"},offsetTop:{value:0},offsetLeft:{value:0},timerClear:{value:0}}})},"0.0.1",{requires:[]});
YUI.add("rg.views.publicprofile.ProfileSignupBannerContentProfileView",function(a){a.namespace("rg.views.ProfileSignupBannerContentProfileView");var b=a.rg.utils.dom.disableButton,c=a.rg.utils.dom.enableButton;a.rg.views.publicprofile.ProfileSignupBannerContentProfileView=a.Base.create("publicprofile.ProfileSignupBannerContentProfileView",a.rg.WidgetView,[],{destructor:function(){this.validator&&this.validator.destroy(),this.handles&&a.Array.each(this.handles,function(a){a.detach()})},afterRendered:function(){var b=this.get("container"),c=b.one("#firstname"),d=b.one("#lastname");c&&d&&(c.plug(a.rg.core.form.GhostPlugin,{label:this.get("First name")}),d.plug(a.rg.core.form.GhostPlugin,{label:this.get("Last name")})),this.handles=[],this.button=b.one(".js-signup"),this.validator=a.rg.form.bindValidation(b.one(".js-name-form"),{evaluateOnChange:!0,trimValues:!0,fields:this.get("validationFields"),callback:function(a,b){this.validateResponse(b)||this.enableButton()}},this),this.handles.push(this.validator.on("evaluateField",function(b){a.Lang.later(0,this,function(){this.validateField(b.field,b.response),this.validator.evaluate()})},this)),this.handles.push(this.validator.on("evaluate",function(b){a.Object.size(b.response.errors)>0||this.enableButton()},this)),b.all(".js-text-input").plug(a.rg.form.DelayedObserverPlugin,{ctx:this,fn:function(){this.validator.evaluate()}}),this.validator.evaluate()},enableButton:function(){c(this.button)},disableButton:function(){b(this.button)}},{ATTRS:{errorPopoverConfig:{value:{}},validationFields:{value:{firstname:{NotBlank:{message:"Please enter a first name"},Length:{min:2,minMessage:"Your first name must be at least {{min}} characters",max:50,maxMessage:"Your first name must be {{max}} characters or less"},Regex:{pattern:a.rg.form.REGEX_NAME,message:"Please enter a valid first name"}},lastname:{NotBlank:{message:"Please enter a last name"},Length:{min:2,minMessage:"Your last name must be at least {{min}} characters",max:50,maxMessage:"Your last name must be {{max}} characters or less"},Regex:{pattern:a.rg.form.REGEX_NAME,message:"Please enter a valid last name"}}}}}})},"0.0.1",{requires:["rg-form-validation","rg-form","rg.core.form.GhostPlugin"]});
